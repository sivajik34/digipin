{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/auth/jwt/login":{"post":{"tags":["auth"],"summary":"Auth:Jwt.Login","operationId":"auth_jwt_login_auth_jwt_login_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_auth_jwt_login_auth_jwt_login_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BearerResponse"},"example":{"access_token":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoiOTIyMWZmYzktNjQwZi00MzcyLTg2ZDMtY2U2NDJjYmE1NjAzIiwiYXVkIjoiZmFzdGFwaS11c2VyczphdXRoIiwiZXhwIjoxNTcxNTA0MTkzfQ.M10bjOe45I5Ncu_uXvOmVV8QxnL-nZfcH96U90JaocI","token_type":"bearer"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorModel"},"examples":{"LOGIN_BAD_CREDENTIALS":{"summary":"Bad credentials or the user is inactive.","value":{"detail":"LOGIN_BAD_CREDENTIALS"}},"LOGIN_USER_NOT_VERIFIED":{"summary":"The user is not verified.","value":{"detail":"LOGIN_USER_NOT_VERIFIED"}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/jwt/logout":{"post":{"tags":["auth"],"summary":"Auth:Jwt.Logout","operationId":"auth_jwt_logout_auth_jwt_logout_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"401":{"description":"Missing token or inactive user."}},"security":[{"OAuth2PasswordBearer":[]}]}},"/auth/register":{"post":{"tags":["auth"],"summary":"Register:Register","operationId":"register_register_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorModel"},"examples":{"REGISTER_USER_ALREADY_EXISTS":{"summary":"A user with this email already exists.","value":{"detail":"REGISTER_USER_ALREADY_EXISTS"}},"REGISTER_INVALID_PASSWORD":{"summary":"Password validation failed.","value":{"detail":{"code":"REGISTER_INVALID_PASSWORD","reason":"Password should beat least 3 characters"}}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me":{"get":{"tags":["users"],"summary":"Users:Current User","operationId":"users_current_user_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"401":{"description":"Missing token or inactive user."}},"security":[{"OAuth2PasswordBearer":[]}]},"patch":{"tags":["users"],"summary":"Users:Patch Current User","operationId":"users_patch_current_user_users_me_patch","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"401":{"description":"Missing token or inactive user."},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorModel"},"examples":{"UPDATE_USER_EMAIL_ALREADY_EXISTS":{"summary":"A user with this email already exists.","value":{"detail":"UPDATE_USER_EMAIL_ALREADY_EXISTS"}},"UPDATE_USER_INVALID_PASSWORD":{"summary":"Password validation failed.","value":{"detail":{"code":"UPDATE_USER_INVALID_PASSWORD","reason":"Password should beat least 3 characters"}}}}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/{id}":{"get":{"tags":["users"],"summary":"Users:User","operationId":"users_user_users__id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"401":{"description":"Missing token or inactive user."},"403":{"description":"Not a superuser."},"404":{"description":"The user does not exist."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["users"],"summary":"Users:Patch User","operationId":"users_patch_user_users__id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserRead"}}}},"401":{"description":"Missing token or inactive user."},"403":{"description":"Not a superuser."},"404":{"description":"The user does not exist."},"400":{"content":{"application/json":{"examples":{"UPDATE_USER_EMAIL_ALREADY_EXISTS":{"summary":"A user with this email already exists.","value":{"detail":"UPDATE_USER_EMAIL_ALREADY_EXISTS"}},"UPDATE_USER_INVALID_PASSWORD":{"summary":"Password validation failed.","value":{"detail":{"code":"UPDATE_USER_INVALID_PASSWORD","reason":"Password should beat least 3 characters"}}}},"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Bad Request"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["users"],"summary":"Users:Delete User","operationId":"users_delete_user_users__id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"string","title":"Id"}}],"responses":{"204":{"description":"Successful Response"},"401":{"description":"Missing token or inactive user."},"403":{"description":"Not a superuser."},"404":{"description":"The user does not exist."},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/digipin":{"get":{"tags":["DIGIPIN"],"summary":"Get Digipin By Lat Lng","description":"Generate a DIGIPIN code for the given latitude and longitude.\n\n- **lat**: Latitude in degrees\n- **lng**: Longitude in degrees\n- **Returns**: Encoded DIGIPIN code","operationId":"get_digipin_by_lat_lng_api_digipin_get","parameters":[{"name":"lat","in":"query","required":true,"schema":{"type":"number","maximum":37,"minimum":8,"description":"Latitude value (8 to 37 degrees)","title":"Lat"},"description":"Latitude value (8 to 37 degrees)"},{"name":"lng","in":"query","required":true,"schema":{"type":"number","maximum":98,"minimum":68,"description":"Longitude value (68 to 98 degrees)","title":"Lng"},"description":"Longitude value (68 to 98 degrees)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EncodeDigipinResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/latlng":{"get":{"tags":["DIGIPIN"],"summary":"Get Latlng","description":"Decode a DIGIPIN code into its latitude and longitude.\n\n- **digipin**: A valid 10-character DIGIPIN\n- **Returns**: Latitude and longitude as float values","operationId":"get_latlng_api_latlng_get","parameters":[{"name":"digipin","in":"query","required":true,"schema":{"type":"string","minLength":1,"maxLength":14,"description":"DIGIPIN code (10 characters using F,C,J,K,L,M,P,T and digits 2–9)","title":"Digipin"},"description":"DIGIPIN code (10 characters using F,C,J,K,L,M,P,T and digits 2–9)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DecodeDigipinResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/address":{"get":{"tags":["DIGIPIN"],"summary":"Get Address From Digipin","description":"Get full address details from a DIGIPIN code using reverse geocoding.\n\n- **digipin**: A valid 10-character DIGIPIN\n- **Returns**: Address fields including full address, city, state, country, and pincode","operationId":"get_address_from_digipin_api_address_get","parameters":[{"name":"digipin","in":"query","required":true,"schema":{"type":"string","description":"DIGIPIN code to be decoded into address","title":"Digipin"},"description":"DIGIPIN code to be decoded into address"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/digipin/validate":{"get":{"tags":["DIGIPIN"],"summary":"Validate Digipin Service Area","operationId":"validate_digipin_service_area_api_digipin_validate_get","parameters":[{"name":"digipin","in":"query","required":true,"schema":{"type":"string","description":"DIGIPIN to validate","title":"Digipin"},"description":"DIGIPIN to validate"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/optimize-route":{"post":{"tags":["DIGIPIN"],"summary":"Optimize Route","operationId":"optimize_route_api_optimize_route_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OptimizeRouteRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OptimizeRouteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/qr":{"get":{"summary":"Generate QR code image for DIGIPIN","description":"Returns a QR code PNG image for a given DIGIPIN","operationId":"get_qr_image_api_qr_get","parameters":[{"name":"digipin","in":"query","required":true,"schema":{"type":"string","minLength":1,"maxLength":10,"title":"Digipin"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/qr/download":{"get":{"summary":"Download QR code for DIGIPIN","description":"Returns a downloadable QR code PNG image for a given DIGIPIN","operationId":"download_qr_image_api_qr_download_get","parameters":[{"name":"digipin","in":"query","required":true,"schema":{"type":"string","minLength":1,"maxLength":10,"title":"Digipin"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/digipin/user/save":{"post":{"tags":["user-digipins"],"summary":"Save Digipin","operationId":"save_digipin_api_digipin_user_save_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DigipinCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DigipinRead"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/digipin/user/list":{"get":{"tags":["user-digipins"],"summary":"List User Digipins","operationId":"list_user_digipins_api_digipin_user_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/DigipinRead"},"type":"array","title":"Response List User Digipins Api Digipin User List Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/digipin/user/delete/{digipin_id}":{"delete":{"tags":["user-digipins"],"summary":"Delete User Digipin","operationId":"delete_user_digipin_api_digipin_user_delete__digipin_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"digipin_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Digipin Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/google":{"post":{"summary":"Login With Google","operationId":"login_with_google_auth_google_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GoogleToken"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Root","operationId":"root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/protected-route":{"get":{"summary":"Protected Route","operationId":"protected_route_protected_route_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"AddressResponse":{"properties":{"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"},"full_address":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Address"},"pincode":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Pincode"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"state":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"State"},"country":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Country"}},"type":"object","required":["latitude","longitude","full_address","pincode","city","state","country"],"title":"AddressResponse"},"BearerResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"BearerResponse"},"Body_auth_jwt_login_auth_jwt_login_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_auth_jwt_login_auth_jwt_login_post"},"DecodeDigipinResponse":{"properties":{"latitude":{"type":"number","title":"Latitude"},"longitude":{"type":"number","title":"Longitude"}},"type":"object","required":["latitude","longitude"],"title":"DecodeDigipinResponse"},"DigipinCreate":{"properties":{"digipin":{"type":"string","title":"Digipin"},"user_friendly_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Friendly Name"}},"type":"object","required":["digipin"],"title":"DigipinCreate"},"DigipinRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"digipin":{"type":"string","title":"Digipin"},"user_friendly_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"User Friendly Name"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["id","digipin","created_at"],"title":"DigipinRead"},"EncodeDigipinResponse":{"properties":{"digipin":{"type":"string","title":"Digipin"}},"type":"object","required":["digipin"],"title":"EncodeDigipinResponse"},"ErrorModel":{"properties":{"detail":{"anyOf":[{"type":"string"},{"additionalProperties":{"type":"string"},"type":"object"}],"title":"Detail"}},"type":"object","required":["detail"],"title":"ErrorModel"},"GoogleToken":{"properties":{"token":{"type":"string","title":"Token"}},"type":"object","required":["token"],"title":"GoogleToken"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"OptimizeRouteRequest":{"properties":{"depot":{"type":"string","title":"Depot"},"vehicles":{"type":"integer","title":"Vehicles"},"locations":{"items":{"$ref":"#/components/schemas/RouteLocation"},"type":"array","title":"Locations"}},"type":"object","required":["depot","vehicles","locations"],"title":"OptimizeRouteRequest"},"OptimizeRouteResponse":{"properties":{"routes":{"items":{"$ref":"#/components/schemas/OptimizedRoute"},"type":"array","title":"Routes"}},"type":"object","required":["routes"],"title":"OptimizeRouteResponse"},"OptimizedRoute":{"properties":{"vehicle_id":{"type":"integer","title":"Vehicle Id"},"stops":{"items":{"type":"string"},"type":"array","title":"Stops"}},"type":"object","required":["vehicle_id","stops"],"title":"OptimizedRoute"},"RouteLocation":{"properties":{"digipin":{"type":"string","title":"Digipin"},"priority":{"type":"integer","maximum":3.0,"minimum":1.0,"title":"Priority"},"time_window":{"prefixItems":[{"type":"integer"},{"type":"integer"}],"type":"array","maxItems":2,"minItems":2,"title":"Time Window","description":"Start and end time window"}},"type":"object","required":["digipin","priority","time_window"],"title":"RouteLocation"},"UserCreate":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"password":{"type":"string","title":"Password"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true},"is_superuser":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Superuser","default":false},"is_verified":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Verified","default":false}},"type":"object","required":["email","password"],"title":"UserCreate"},"UserRead":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"email":{"type":"string","format":"email","title":"Email"},"is_active":{"type":"boolean","title":"Is Active","default":true},"is_superuser":{"type":"boolean","title":"Is Superuser","default":false},"is_verified":{"type":"boolean","title":"Is Verified","default":false}},"type":"object","required":["id","email"],"title":"UserRead"},"UserUpdate":{"properties":{"password":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Password"},"email":{"anyOf":[{"type":"string","format":"email"},{"type":"null"}],"title":"Email"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"is_superuser":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Superuser"},"is_verified":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Verified"}},"type":"object","title":"UserUpdate"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"auth/jwt/login"}}}}}}